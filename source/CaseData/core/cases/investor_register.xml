<case id="silverInvestTransfer_银转投">
	<context>
		<item name="INVESTOR_ID">00X00060</item>
		<item name="amount">50</item>
		<item name="currency">1</item>
		<item name="transferType">1</item>
		<item name="ACCOUNT_FUND_ID">AC00X00060</item>
	</context>
	<step note="清空当前账户余额">
		<helper name="helper.mysql.execute">
			<item name="sql" format="ACCOUNT_FUND_ID,INVESTOR_ID" statement="update"><![CDATA[update ACCOUNT_FUND set ACCOUNT_BALANCE='0' WHERE ACCOUNT_FUND_ID='%s'and INVESTOR_ID='%s']]></item>
		</helper>
	</step>
	<step note="银投转账">
		<helper name="helper.thrift">
			<item name="call" function="silverInvestTransfer">
				<param type="TransferInfoStruct">
					<val name="investorID" format="INVESTOR_ID">%s</val>
					 <val name="amount" format="amount">%s</val> 
					<val name="currency" format="currency">%s</val>
					<val name="transferType" format="transferType">%s</val>
					<val name="invest_special_account" format="ACCOUNT_FUND_ID">%s</val>
				</param>
				<ret type="TransferResultStruct">
					<val name="currentbalance">currentbalance</val>
				</ret>
			</item>
		</helper>
		<return>
			<item name="currentbalance">currentbalance</item>
		</return>
		<assert>
			<item name="notnull" var="currentbalance"></item>
		</assert>
	</step>
	<step note="检查数据库">
		<helper name="helper.mysql.execute">
			<item name="sql" format="ACCOUNT_FUND_ID,INVESTOR_ID" statement="select"><![CDATA[SELECT ACCOUNT_BALANCE as a FROM ACCOUNT_FUND WHERE ACCOUNT_FUND_ID='%s' and INVESTOR_ID='%s']]></item>
		</helper>
		<return>
			<item name="ACCOUNT_BALANCE">a</item>
		</return>
		<assert>
			<item name="equals" var="ACCOUNT_BALANCE" param="50"></item>
		</assert>
	</step>
</case>
