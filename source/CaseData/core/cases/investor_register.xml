<case id="institution_productaudit">
	<context>
		<item name="institutionID">900900902</item>
		<item name="PRODUCT_ID_A">PR000013</item>
		<item name="PRODUCT_ID_B">PR100018</item>
	</context>
	<step note="更新代购产品">
		<helper name="helper.thrift">
			<item name="call" function="institution_productaudit">
				<param type="ProductAuditStruct" name="productaudit">
					<val name="institutionID" format="institutionID">%s</val>
					<val name="productids">
						<item>
							<val name="productid" format="PRODUCT_ID_A">%s</val>
							<val name="opetype">1</val>
						</item>
						<item>
							<val name="productid" format="PRODUCT_ID_B">%s</val>
							<val name="opetype">1</val>
						</item>
					</val>
				</param>
				<ret type="ProductAuditResultStruct">
					<val name="count">count</val>
				</ret>
			</item>
		</helper>
		<return>
			<item name="count">count</item>
		</return>

	</step>
	<step note="检查数据库机构产品表中增加了两条记录">
		<helper name="helper.mysql.execute">
			<item name="sql" format="institutionID" statement="select"><![CDATA[SELECT COUNT(*) as c FROM INSTITUTION_PRODUCT WHERE INSTITUTION_ID='%s']]></item>
		</helper>
		<return>
			<item name="count">c</item>
		</return>
		<assert>
			<item name="equals" var="count" param="3"></item>
		</assert>
	</step>
</case>
